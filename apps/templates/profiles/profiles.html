{% extends "layouts/base.html" %}

{% block title %} الجهات {% endblock %} 
{% block header_title %} إستعراض الجهات {% endblock %}
{% block header_profile_image %}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
    <path d="M616 192H480V24c0-13.3-10.7-24-24-24H312c-13.3 0-24 10.7-24 24v72h-64V16c0-8.8-7.2-16-16-16h-16c-8.8 0-16 7.2-16 16v80h-64V16c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16v80H24c-13.3 0-24 10.7-24 24v360c0 17.7 14.3 32 32 32h576c17.7 0 32-14.3 32-32V216c0-13.3-10.8-24-24-24zM128 404c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm128 192c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm160 96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm160 288c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z" />
</svg>
{% endblock %}


<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <main>
        
        {% include 'includes/preloader.html' %}
        <!-- Hero -->
        <section class="section-header">
            <div class="container">
                <div class="search-bar">
                    <a href="{{ url_for('globals_blueprint.export_to_excel', model_name='Profile') }}" style="font-family: 'Jersey 10'; font-size: x-large;"><span class="fas fa-file-excel" style="font-size: x-large; padding-inline: 5px; color: green;"></span>Export to Excel</a>
                    <form>
                        <div class="input-group">
                            <span class="input-group-text" id="basic-addon1"><button class="btn fas fa-search" type="submit"></button></span>
                            <input type="text" class="form-control" id="searchbox1" placeholder=" بحث بإسم الجهة" aria-label="Search1" aria-describedby="basic-addon1" name="q" value="{{ search_terms }}">
                        </div>
                    </form>
                </div>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">كود</th>
                            <th scope="col">الجهة</th>
                            <th scope="col">تاريخ التأسيس</th>
                            <th scope="col">مدير الحساب</th>
                            <th scope="col">البريد الإلكتروني</th>
                            <th scope="col"></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for profile in profiles %}
                            <tr>
                                <td>
                                    <a href="{{ url_for('profiles_blueprint.profile_edit', profile_id=profile.id) }}">
                                    {{ profile.code }}
                                    </a>
                                </td>
                                <td>{{ profile.name }}</td>
                                <td>{{ profile.est_date }}</td>
                                <td>{{ profile.account_manager }}</td>
                                <td>{{ profile.account_manager_email }}</td>
                                <td>
                                    <div class="btn-bar">
                                        <a href="{{ url_for('profiles_blueprint.profile_actions', profile_id=profile.id) }}" class="btn btn-primary btn-sm">متابعة</a>
                                        <a href="{{ url_for('profiles_blueprint.profile_edit', profile_id=profile.id) }}" class="btn btn-primary btn-sm">تعديل</a>
                                        <a class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#modal-default" onclick="openConfirmationModal('هل أنت متأكد من الحذف ؟','{{ url_for('profiles_blueprint.profile_delete', profile_id=profile.id) }}');">حذف</a>
                                    </div>
                                </td>

                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
                <nav aria-label="Blog page navigation">
                    <ul class="pagination">
                        {% for page in profiles.iter_pages() %}
                        {% if page %}
                        {% if profiles.page == page %}
                        <li class="page-item active">
                            <a class="page-link" href="#">{{ page }}</a>
                        </li>
                        {% else %}
                        <li class="page-item">
                            <a class="page-link" href="{{ url_for('profiles_blueprint.profiles', page=page, q=search_terms) }}">{{ page }}</a>
                        </li>
                        {% endif %}
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#">...</a>
                        </li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </nav>
                <hr>
                <a href="{{ url_for('profiles_blueprint.profile_add') }}" class="btn btn-primary">إضافة جهة جديدة</a>
            </div>
        </section>

    </main>

    {% include 'includes/footer.html' %}

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
